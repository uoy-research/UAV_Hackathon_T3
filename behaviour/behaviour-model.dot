
digraph Behaviour {
    newrank="true";
    nodesep=1;
    graph [ compound="true" fontname="Ubuntu Condensed,sans-serif"];
    node [ shape="rectangle" style="filled" fontname="Ubuntu Condensed,sans-serif" ];
    edge [ penwidth="1" color="grey" fontname="Ubuntu Condensed,sans-serif" ];
    labeljust="c";

    subgraph in_contact {
        label = "In Contact with Human RC";
        cluster=true;
        style="dashed";

        rc_by_hum [label="Remotely controlled\nby human"];
    }

    rc_by_hum -> conn_act [label="check"];
    conn_act [label="Connection Active?" shape="oval"];
    conn_act -> stab [label="no"];
    conn_act -> rc_by_hum [label="yes"];

    subgraph autonomous {
        label = "Autonomous operation";
        cluster=true;
        style="dashed";

        stab [label="Stabilise"];
        pla_exists [label="Does an escape plan exist?" shape="oval"];
        stab -> pla_exists [label="check"];
        escape [label="Escaping"];
        pla_exists -> escape [label="yes"];
        pla_exists -> stab [label="no"];
        on_track [label="On track?\nSensors ok?" shape="oval"];
        escape -> on_track [label="check"];
        on_track -> escape [label="yes"];
        on_track -> stab [label="no"];
        stab -> backhome [label="check"];
        escape -> backhome [label="check"];
        backhome [label="Back home?" shape="oval"];
        backhome -> pla_exists;
    }


        backhome -> land [label="yes"];
    
    subgraph the_end {
        label="Bailing out or landing";
        cluster=true;
        style="dashed";

        land [label="Attempt safe landing"];
    }

    
    {
        rank = "same";
        rc_by_hum;
        stab;
        land;
    }

}
